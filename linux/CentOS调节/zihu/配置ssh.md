# VScode 远程连接

## 1.下载插件 `Remote-SSH`
直接下载`Remote-SSH`就好了，我感觉他的配置如果改了之后更新好慢
有时候第一次配置错了，但第二次改对了的话他可能没有及时更新
<!-- ![001.jpg](images/001.jpg "001.jpg") -->

***

## 2.添加远程连接的 IP
安装好`Remote-SSH`左边会有一个他的图标
点击右上角加号可以添加新的远程设备
<!-- ![002.jpg](images/002.jpg "002.jpg") -->
如果是 linux 可以填入
```
ssh root@ip
```
<!-- ![003.jpg](images/003.jpg "003.jpg") -->
至于远程设备ip的获取：
在远程设备打开终端输入`ifconfig`
ens33中的那个就是(ens33是 Linux 系统中的一种网络接口名称)
<!-- ![023.jpg](images/023.jpg "003.jpg") -->
这两个选哪个都可以，不过要记住选的哪个，下面要用

***

## 3.可选择更改的配置

<!-- ![004.jpg](images/004.jpg "004.jpg") -->
可以看到已经添加好了(第一个,下面那个不是)
在点击那个齿轮可以进行配置
<!-- ![005.jpg](images/005.jpg "005.jpg") -->
选上面选的哪个文件
<!-- ![006.jpg](images/006.jpg "006.jpg") -->
Host 后面的是这个远程设备的名字，可以自己随便取
HostName 就是ip 
(虚拟机的ip如果没固定可能会变,有时候连接不了可以看一下虚拟机的ip有没有变)
User 就是指定默认的用户

***

## 4.进行连接

<!-- ![007.jpg](images/007.jpg "007.jpg") -->
左边这个箭头是在这个窗口打开连接
右边的是在新窗口打开
<!-- ![008.jpg](images/008.jpg "008.jpg") -->
也可以点击左下角这个开启连接
<!-- ![009.jpg](images/009.jpg "009.jpg") -->
选择操作系统类型
点击后应该会让你输入密码，输入虚拟机的密码就好了
<!-- ![010.jpg](images/010.jpg "010.jpg") -->
到这里就已经可以正常进行连接了

***

## 5.添加SSH
每次连接都要输入密码如果嫌麻烦的话就可以配置SSH,可以免密登入

连接虚拟机打开终端
+ `-m PEM` 指定密钥的存储格式 
(可以省略，我查了一下说这个格式太旧了最好不写,但我学的时候有，就写这里了)

输入：
```
ssh-keygen -m PEM -t rsa -C "linuxlearning"
```
其中 `linuxlearning` 是备注，你自己随便填就行
`ssh-keygen` 是 SSH 密钥生成工具的命令名，用于生成密钥对(公钥和私钥)
`-m PEM` 指定密钥的存储格式 (也可以不指定)
`-t rsa` 指定密钥的类型，相当于加密算法
<!-- ![016.jpg](images/016.jpg "016.jpg") -->

进入 `.ssh` (记得要进入啊)
```
cd .ssh
```
可以看到已经成功生成了密钥对
将生成的公钥`（id_rsa.pub）`添加到远程主机的 `authorized_keys` 文件中
```
cat id_rsa.pub >> authorized_keys
```
当你使用 SSH 连接到该远程主机时，
SSH 服务器会检查你的私钥是否与 authorized_keys 中的公钥匹配。
如果匹配，服务器将允许你登录，而无需输入密码
```
cd .ssh
cat id_rsa.pub >> authorized_keys
```
<!-- ![017.jpg](images/017.jpg "017.jpg") -->
打开连接了远程的VScode窗口，点击打开文件夹
<!-- ![018.jpg](images/018.jpg "018.jpg") -->
上方输入
```
/root/.ssh/
```
进入.ssh文件夹,应该要输入密码
<!-- ![019.jpg](images/019.jpg "019.jpg") -->
点击 `id_rsa` 后(注意不是id_rsa.pub)，点击鼠标右键，再点击下载
下载到本地计算机中
一般放置位置是C盘里面的用户->用户名->.ssh
随便取个名字就可以
<!-- ![020.jpg](images/020.jpg "020.jpg") -->
这是下载好的
<!-- ![021.jpg](images/021.jpg "021.jpg") -->
再进入vscode中打开ssh的配置文件(其实就是上面的config)
添加一句话
```
IdentityFile "上面那个文件的地址，注意要完整地址"
```
<!-- ![022.jpg](images/022.jpg "022.jpg") -->
这样就配置好了
