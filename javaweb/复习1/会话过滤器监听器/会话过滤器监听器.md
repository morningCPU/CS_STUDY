## 1.会话管理
### 1.1 cookie
1. 设置
设置cookie并加入resp
```java
@WebServlet("/servletA")
public class servletA extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        Cookie cookie1 = new Cookie("key1", "val1");
        Cookie cookie2 = new Cookie("key2", "val2");
        resp.addCookie(cookie1);
        resp.addCookie(cookie2);
    }
}
```
2. 获取
使用 req.getCookie()
```java
@WebServlet("/servletB")
public class servletB extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        Cookie[] cookies = req.getCookies();
        for(var i: cookies){
            System.out.println(i);
        }
    }
}
```
### 1.2 cookie的时效性
默认是会话级的
设置时间 setMaxAge(time);
+ 注意要在addCookie之前使用
### 1.3 cookie的区域性
默认都携带
设置携带cookie的路径 setPath(path);
+ 注意要在addCookie之前使用
## 2. 三大域对象
1. 请求域(HttpServletRequest)
2. 会话域(HttpSession)
3. 应用域(ServletContext)
### 2.1 域对象api
1. setAttribute()
2. getAttribute()
3. removeAttribute()
### 2.2 Session的时效性
session.setMaxInactiveInterval()
session.invalidate
### 2.3 使用
```java
@WebServlet("/servletA")
public class servletA extends HttpServlet {
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //请求域
        req.setAttribute("name","morning");
        String name = (String)req.getAttribute("name");
        System.out.println(name);
        //会话区域
        HttpSession session = req.getSession();
        session.setAttribute("name2","morning2");
        String name2 = (String)session.getAttribute("name2");
        System.out.println(name2);
        //应用域
        ServletContext servletContext = getServletContext();
        servletContext.setAttribute("name3","morning3");
        String name3 = (String)servletContext.getAttribute("name3");
        System.out.println(name3);
    }
}
```
## 3. filter
+ filter1
```java
public class Filter1 implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) servletRequest;
        HttpServletResponse resp = (HttpServletResponse) servletResponse;
        System.out.println("in");
        //out
        filterChain.doFilter(req,resp);
        System.out.println("back");
    }
}
```
+ web.xml
```xml
<filter>
    <filter-name>filter1</filter-name>
    <filter-class>com.morning.filter.Filter1</filter-class>
</filter>
<filter-mapping>
    <filter-name>filter1</filter-name>
    <url-pattern>/servletA</url-pattern>
</filter-mapping>
```
或者使用注解
+ filter1
```java
@WebFilter("/servletA")
public class Filter1 implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) servletRequest;
        HttpServletResponse resp = (HttpServletResponse) servletResponse;
        System.out.println("in");
        //out
        filterChain.doFilter(req,resp);
        System.out.println("back");
    }
}
```
## 4. 监听器
用于对域对象身上发生的事件或状态改变进行监听和相应处理的对象
### 4.1 八大监听器
1. ServletContextListener
2. ServletContextAttributeListener
3. HttpSessionListener
4. HttpSessionAttributeListener
5. HttpSessionBinding
6. HttpSessionActivationListener
7. ServletRequestListener
8. ServletRequestAttributeListener
